<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إنشاء حساب جديد - منصة القائد التعليمية</title>

  <!-- أيقونة -->
  <link rel="icon" type="image/png" sizes="2000" href="5926948237783189215.png">
  <link rel="stylesheet" href="signup.css">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Firebase CDN (نسخة UMD بدون import) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

</head>
<body>
    <!-- الغلاف الرئيسي لصفحة التسجيل -->
    <div class="signup-page-wrapper">
        <!-- الجانب الأيمن: الرسوم المتحركة والرسالة الترحيبية -->
        <div class="animation-side">
            <div class="chemistry-animation">
                <svg class="beaker-svg" viewBox="0 0 200 300">
                    <defs>
                        <!-- تدرج لوني للسائل داخل المخبار -->
                        <linearGradient id="beakerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#00bcd4" />
                            <stop offset="100%" stop-color="#007bff" />
                        </linearGradient>
                        <!-- تأثير الظل للسائل (اختياري) -->
                        <filter id="liquidShadow">
                            <feDropShadow dx="0" dy="5" stdDeviation="5" flood-color="#000" flood-opacity="0.3" />
                        </filter>
                    </defs>
                    <!-- جسم المخبار الزجاجي -->
                    <path class="beaker-body" d="M30,0 L30,250 C30,280 45,300 100,300 C155,300 170,280 170,250 L170,0 Z" />
                    <!-- السائل المتحرك داخل المخبار (القاعدة) -->
                    <path class="liquid-base" fill="url(#beakerGradient)" d="M30,250 C30,280 45,300 100,300 C155,300 170,280 170,250 L170,150 C170,135 155,120 100,120 C45,120 30,135 30,150 Z" />
                    <!-- السائل المتحرك داخل المخبار (الموجة العلوية) -->
                    <path class="liquid-wave" fill="url(#beakerGradient)" d="M30,150 Q65,140 100,150 T170,150 V250 C170,280 155,300 100,300 C45,300 30,280 30,250 Z" />

                    <!-- علامات القياس على المخبار (للتصميم الجمالي فقط) -->
                    <text x="180" y="50" fill="#fff" font-size="16px" text-anchor="middle">50ml</text>
                    <line x1="170" y1="50" x2="160" y2="50" stroke="#fff" stroke-width="2"/>
                    <text x="180" y="100" fill="#fff" font-size="16px" text-anchor="middle">100ml</text>
                    <line x1="170" y1="100" x2="160" y2="100" stroke="#fff" stroke-width="2"/>
                    <text x="180" y="150" fill="#fff" font-size="16px" text-anchor="middle">150ml</text>
                    <line x1="170" y1="150" x2="160" y2="150" stroke="#fff" stroke-width="2"/>
                </svg>
            </div>
            <h1 class="animation-title">الكيمياء أصبحت أسهل!</h1>
            <p class="animation-slogan">مع منصة القائد، استكشف عالم الكيمياء بطريقة جديدة ومبتكرة.</p>
        </div>

        <!-- الجانب الأيسر: نموذج التسجيل -->
        <div class="signup-side">
            <div class="signup-box">
                <div class="header">
                    <!-- زر الرجوع للصفحة الرئيسية -->
                    <a href="index.html" class="back-link"><i class="fas fa-arrow-right"></i> الرئيسية</a>
                    <h2 class="form-title">إنشاء حساب جديد</h2>
                </div>
                <!-- النموذج نفسه - في البداية سيأخذ كلاس "hidden-form" لإخفائه حتى يتم قبول التعليمات -->
                <form id="signupForm" class="hidden-form"> 
                    <div class="input-group">
                        <label for="username"><i class="fas fa-user"></i> اسم المستخدم الكامل:</label>
                        <input type="text" id="username" placeholder="مثال: أحمد محمد علي" required>
                        <div class="error-message" id="usernameError"></div>
                    </div>

                    <div class="input-group">
                        <label for="email"><i class="fas fa-envelope"></i> البريد الإلكتروني:</label>
                        <input type="email" id="email" placeholder="example@domain.com" required>
                        <div class="error-message" id="emailError"></div>
                    </div>

                    <div class="input-group">
                        <label for="password"><i class="fas fa-lock"></i> كلمة المرور:</label>
                        <input type="password" id="password" placeholder="6+ أحرف، رقم فقط" required>
                        <div class="error-message" id="passwordError"></div>
                    </div>

                    <div class="input-group">
                        <label for="confirmPassword"><i class="fas fa-key"></i> تأكيد كلمة المرور:</label>
                        <input type="password" id="confirmPassword" placeholder="أعد إدخال كلمة المرور" required>
                        <div class="error-message" id="confirmPasswordError"></div>
                    </div>

                    <div class="input-group">
                        <label for="grade"><i class="fas fa-graduation-cap"></i> الصف الدراسي:</label>
                        <select id="grade" required>
                            <option value="">اختر صفك الدراسي</option>
                            <option value="first-secondary">الصف الأول الثانوي</option>
                            <option value="second-secondary">الصف الثاني الثانوي</option>
                            <option value="third-secondary">الصف الثالث الثانوي</option>
                        </select>
                        <div class="error-message" id="gradeError"></div>
                    </div>

                    <div class="input-group">
                        <label for="governorate"><i class="fas fa-city"></i> المحافظة:</label>
                        <select id="governorate" required>
                            <option value="">اختر محافظتك</option>
                            <option value="القاهرة">القاهرة</option>
                            <option value="الإسكندرية">الإسكندرية</option>
                            <option value="الجيزة">الجيزة</option>
                            <option value="القليوبية">القليوبية</option>
                            <option value="الشرقية">الشرقية</option>
                            <option value="المنوفية">المنوفية</option>
                            <option value="البحيرة">البحيرة</option>
                            <option value="كفر الشيخ">كفر الشيخ</option>
                            <option value="الغربية">الغربية</option>
                            <option value="الدقهلية">الدقهلية</option>
                            <option value="دمياط">دمياط</option>
                            <option value="بورسعيد">بورسعيد</option>
                            <option value="الإسماعيلية">الإسماعيلية</option>
                            <option value="السويس">السويس</option>
                            <option value="شمال سيناء">شمال سيناء</option>
                            <option value="جنوب سيناء">جنوب سيناء</option>
                            <option value="مطروح">مطروح</option>
                            <option value="الوادي الجديد">الوادي الجديد</option>
                            <option value="الفيوم">الفيوم</option>
                            <option value="بني سويف">بني سويف</option>
                            <option value="المنيا">المنيا</option>
                            <option value="أسيوط">أسيوط</option>
                            <option value="سوهاج">سوهاج</option>
                            <option value="قنا">قنا</option>
                            <option value="الأقصر">الأقصر</option>
                            <option value="أسوان">أسوان</option>
                            <option value="البحر الأحمر">البحر الأحمر</option>
                        </select>
                        <div class="error-message" id="governorateError"></div>
                    </div>

                    <div class="input-group">
                        <label for="studentId"><i class="fas fa-id-badge"></i> رقم الطالب:</label>
                        <input type="text" id="studentId" placeholder="ادخل رقم الطالب الخاص بك (مثال: 12345)" required>
                        <div class="error-message" id="studentIdError"></div>
                    </div>

                    <div class="input-group">
                        <label for="parentPhone"><i class="fas fa-phone-alt"></i> رقم ولي الأمر:</label>
                        <input type="tel" id="parentPhone" placeholder="ادخل رقم هاتف ولي الأمر (مثال: 01xxxxxxxx)" required>
                        <div class="error-message" id="parentPhoneError"></div>
                    </div>

                    <button type="submit" id="signupButton">
                        إنشاء الحساب
                        <!-- السبينر سيظهر عند التحميل ويتم التحكم به عبر JavaScript -->
                        <span class="spinner" id="loadingSpinner" style="display: none;"></span>
                    </button>
                    
                    <!-- الرسائل العامة القديمة تم التعليق عليها/إزالتها لأنها الآن تُعرض داخل مودال مخصص -->
                    <!-- <div class="status-message" id="generalMessage" style="display: none;"></div> -->
                    <!-- <div class="support-contact" id="supportContact" style="display: none;">
                        في حال واجهتك مشكلة، تواصل مع دعم <a href="https://wa.me/201006473018" target="_blank">Mazen</a>.
                    </div> -->
                </form>
                <div class="login-link">
                    لديك حساب بالفعل؟ <a href="login.html">تسجيل الدخول</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Instructions Modal (النافذة المنبثقة للتعليمات) -->
    <!-- هذا المودال يظهر عند تحميل الصفحة ليطلب من المستخدم قراءة التعليمات -->
    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <!-- زر الإغلاق للمودال -->
            <span class="close-button">&times;</span>
            <h2>تعليمات منصة القائد</h2>
            <div class="instructions-text">
                <p>مرحباً بك في منصة القائد التعليمية. لضمان أفضل تجربة، يرجى قراءة التعليمات التالية قبل إنشاء حسابك:</p>
                <ul>
                    <li><i class="fas fa-check-circle"></i> **دقة البيانات:** تأكد من إدخال جميع معلوماتك بشكل صحيح ودقيق.</li>
                    <li><i class="fas fa-check-circle"></i> **قوة كلمة المرور:** اختر كلمة مرور قوية (أكثر من 6 أحرف، رقم فقط).</li>
                    <li><i class="fas fa-check-circle"></i> **أرقام التواصل:** رقم الطالب وولي الأمر ضروريان للمتابعة والدعم.</li>
                    <li><i class="fas fa-check-circle"></i> **أمان حسابك:** لا تشارك بياناتك مع أي شخص.</li>
                    <li><i class="fas fa-check-circle"></i> **الدعم الفني:** فريق الدعم متاح لمساعدتك في أي وقت.</li>
                </ul>
                <p>باستمرارك، فإنك توافق على <a href="#" target="_blank">شروط الاستخدام</a> و <a href="#" target="_blank">سياسة الخصوصية</a>.</p>
            </div>
            <!-- زر الموافقة الذي يقوم بإظهار نموذج التسجيل وإخفاء هذا المودال -->
            <button id="acceptInstructions" class="accept-button">أوافق وأبدأ التسجيل</button>
        </div>
    </div>

    <!-- New: General Message Modal (نافذة الرسالة العامة) -->
    <!-- هذا المودال يستخدم لعرض رسائل النجاح أو الخطأ من JavaScript -->
    <div id="messageModal" class="modal">
        <div class="modal-content message-modal-content">
            <h2 id="messageTitle"></h2>
            <p id="messageText"></p>
            <div class="message-footer">
                <!-- رابط الدعم يظهر فقط عند وجود رسالة خطأ -->
                <a href="https://wa.me/201006473018" target="_blank" id="messageSupportLink" class="support-button" style="display: none;">تواصل مع الدعم</a>
                <!-- زر "حسناً" لإغلاق المودال -->
                <button id="messageOkButton" class="accept-button">حسناً</button>
            </div>
        </div>
    </div>

    <!-- رابط ملف JavaScript (sign.js): تأكد أنه موجود في نفس مجلد HTML ونوعه "module" -->
    <script  src="sign.js"></script>
</body>
</html>
