<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الحساب</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #007BFF;
            color: white;
            padding: 10px 0;
        }

        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: center;
        }

        nav ul li {
            margin: 0 15px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .button-container {
            display: flex;
            margin-bottom: 20px;
        }

        .tab-button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
        }

        .tab-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            width: 80%;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .progress-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background-color: #f4f4f4;
            position: relative;
            margin: 20px auto;
        }

        .progress-bar {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0px, 200px, 200px, 100px);
            background-color: #007BFF;
            transform-origin: center;
        }

        #assignment-progress {
            transform: rotate(0deg);
        }

        #exam-progress {
            transform: rotate(0deg);
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#">الصفحة الرئيسية</a></li>
                <li><a href="#">صفحة الحساب</a></li>
                <li><a href="#">الخروج</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="container">
            <div class="button-container">
                <button class="tab-button" data-tab="user-data">بيانات المستخدم</button>
                <button class="tab-button" data-tab="subscriptions">اشتراكاتي</button>
                <button class="tab-button" data-tab="assignments">الواجبات</button>
                <button class="tab-button" data-tab="exams">الامتحانات</button>
            </div>
            <div class="content-container">
                <div class="tab-content" id="user-data">
                    <h2>بيانات المستخدم</h2>
                    <div id="user-info"></div>
                    <div class="progress-circle">
                        <div class="progress-bar" id="assignment-progress"></div>
                        <div class="progress-bar" id="exam-progress"></div>
                    </div>
                </div>
                <div class="tab-content" id="subscriptions">
                    <h2>اشتراكاتي</h2>
                    <div id="subscriptions-info"></div>
                </div>
                <div class="tab-content" id="assignments">
                    <h2>الواجبات</h2>
                    <div id="assignments-info"></div>
                    <button id="download-assignments">تحميل الواجبات</button>
                </div>
                <div class="tab-content" id="exams">
                    <h2>الامتحانات</h2>
                    <div id="exams-info"></div>
                    <button id="download-exams">تحميل الامتحانات</button>
                </div>
            </div>
        </div>
    </main>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
    <script>
        // استيراد حزم Firebase المطلوبة
        import { initializeApp } from "firebase/app";
        import { getFirestore, doc, getDoc } from "firebase/firestore";
        import { getAuth, onAuthStateChanged } from "firebase/auth";

        // إعدادات Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDh59dAoiUy1p8F4301kUjwzl9VT0nF2-E",
            authDomain: "ahmed-tarek-7beb4.firebaseapp.com",
            projectId: "ahmed-tarek-7beb4",
            storageBucket: "ahmed-tarek-7beb4.firebasestorage.app",
            messagingSenderId: "873531954018",
            appId: "1:873531954018:web:0f3f29cb2d0232826b923b",
            measurementId: "G-FZRCD5N87Z"
        };

        // تهيئة Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        document.addEventListener('DOMContentLoaded', () => {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');
                });
            });

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    const userDoc = await getDoc(doc(db, "userdata", user.uid));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        document.getElementById('user-info').innerHTML = `
                            <p>الاسم: ${userData.name}</p>
                            <p>الرقم: ${userData.number}</p>
                            <p>البريد الإلكتروني: ${userData.email}</p>
                        `;

                        const assignmentProgress = userData.assignmentProgress || 0;
                        const examProgress = userData.examProgress || 0;

                        document.getElementById('assignment-progress').style.transform = `rotate(${assignmentProgress * 3.6}deg)`;
                        document.getElementById('exam-progress').style.transform = `rotate(${examProgress * 3.6}deg)`;
                    }
                }
            });

            document.getElementById('download-assignments').addEventListener('click', () => {
                // تحميل الواجبات في ملف اكسل
            });

            document.getElementById('download-exams').addEventListener('click', () => {
                // تحميل الامتحانات في ملف اكسل
            });
        });
    </script>
</body>
</html>